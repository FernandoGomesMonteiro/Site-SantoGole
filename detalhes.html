<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Drink - SantoGole</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/receita.css">
</head>

<body>
    <header class="main-header" id="main-header">
        <a href="index.html" class="logo">Santo<span>Gole</span></a>
        <nav class="desktop-nav">
            <a href="index.html">Início</a>
            <a href="/catalogo.html" class="active">Catálogo</a>
            <a href="/roleta.html">Surpresa</a>
            <a href="/sobre.html">Sobre</a>
        </nav>
    </header>

    <!-- HERO -->
    <section class="hero" id="hero">
        <div class="hero-flex">
            <a href="catalogo.html" class="hero-btn">
                <i class="fas fa-arrow-left"></i>
                <span style="margin-left: 8px;">Voltar ao Catálogo</span>
            </a>

            <div class="hero-text">
                <div class="hero-content">
                    <h1 id="drink-name">Carregando...</h1>
                    <p id="drink-desc">Buscando informações do drink.</p>
                </div>

                <div id="drink-detail">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Carregando detalhes do drink...</p>
                    </div>
                </div>
            </div>

            <div class="hero-image-container">
                <img id="drink-image" src="" alt="Imagem do Drink">
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const urlParams = new URLSearchParams(window.location.search);
            const drinkId = urlParams.get('id');

            if (!drinkId) {
                showError('ID do drink não especificado na URL.');
                return;
            }

            fetch(`https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=${drinkId}`)
                .then(response => {
                    if (!response.ok) throw new Error('Erro na resposta da API');
                    return response.json();
                })
                .then(data => {
                    if (!data.drinks || data.drinks.length === 0) throw new Error('Drink não encontrado');
                    renderDrinkDetail(data.drinks[0]);
                })
                .catch(error => {
                    console.error(error);
                    showError('Não foi possível carregar os detalhes do drink. Por favor, tente novamente.');
                });

            function renderDrinkDetail(drink) {
                const ingredients = [];
                for (let i = 1; i <= 15; i++) {
                    const ingredient = drink[`strIngredient${i}`];
                    const measure = drink[`strMeasure${i}`];
                    if (ingredient && ingredient.trim() !== '') ingredients.push({ ingredient, measure: measure || '' });
                }

                // Atualiza a imagem e o texto da seção
                const drinkImage = document.getElementById('drink-image');
                drinkImage.src = drink.strDrinkThumb;
                drinkImage.alt = drink.strDrink;

                document.getElementById('drink-name').textContent = drink.strDrink;
                document.getElementById('drink-desc').textContent = drink.strCategory || 'Drink especial';

                // Detalhes da receita
                const drinkDetailHTML = `
                    <div class="drink-detail">
                        <div class="drink-info">
                            <div class="meta-info">
                                <span class="meta-tag">${drink.strCategory || 'Unknown'}</span>
                                <span class="meta-tag">${drink.strAlcoholic || 'Unknown'}</span>
                                <span class="meta-tag">${drink.strGlass || 'Unknown'}</span>
                            </div>

                            <div class="ingredients-section">
                                <h2>Ingredientes</h2>
                                <ul class="ingredients-list">
                                    ${ingredients.map(item => `
                                        <li>
                                            <span>${item.ingredient}</span>
                                            <span>${item.measure}</span>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>

                            <div class="instructions-section">
                                <h2>Instruções</h2>
                                <div class="instructions">${drink.strInstructions || 'Instruções não disponíveis.'}</div>
                            </div>

                            ${drink.strVideo ? `
                                <div class="video-section">
                                    <h2>Vídeo</h2>
                                    <div class="video-container">
                                        <a href="${drink.strVideo}" target="_blank" class="video-link">
                                            Ver tutorial no YouTube
                                        </a>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                document.getElementById('drink-detail').innerHTML = drinkDetailHTML;
            }

            function showError(message) {
                document.getElementById('drink-detail').innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <h2>Ocorreu um erro</h2>
                        <p>${message}</p>
                    </div>
                `;
            }
            
        });
    </script>

    <script src="./js/menu.js"></script>
    <script src="./js/footer.js"></script>
</body>

</html>